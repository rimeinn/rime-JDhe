# Rime schema
# encoding: utf-8


schema:
  schema_id: pinyin
  name: æ‹¼éŸ³Â·å…¨æ‹¼
  icon: ico/æœ™.ico          # string æ–¹æ¡ˆå›¾æ ‡ï¼Œæ ¼å¼ï¼š .ico
  version: "2025.07.27"
  author:
    - ä½›æŒ¯ <chen.sst@gmail.com>
    - Rime schema by zHon     
  description: |
    Rime é è¨­çš„æ‹¼éŸ³è¼¸å…¥æ–¹æ¡ˆã€‚
    é›¾å‡‡æ‹¼éŸ³ <https://github.com/iDvel/rime-ice>
    ç™½éœœæ‹¼éŸ³ <https://github.com/gaboolic/rime-frost>
  dependencies:
    - reverse_pinyin   # æ‹¼éŸ³å•å­—åæŸ¥
    - melt_eng # è‹±æ–‡
    - tiger  # è™ç 
    - jde  # ç®€å•é¹¤ 
    - radical_pinyin   # éƒ¨ä»¶æ‹†å­—
    - stroke   # äº”ç­†ç•«
    - charset   # å­—é›†è¿‡æ»¤

__include: config_base:/switches_engine_script        # Rimeæ¨¡å—
__include: config_base:/opencc_config
__include: config_base:/reverse_config                # åæŸ¥æ¨¡å—
__include: config_base:/Lua_config                    # è‡ªå®šä¹‰æ¨¡å—
__include: config_base:/recognizer_config             # è¯†åˆ«å™¨æ¨¡å—
__include: config_base:/octagram/enable_for_sentence  # å¯ç”¨è¯­è¨€æ¨¡å‹


# æ‹¼å†™è®¾å®š
speller:
  # å¦‚æœä¸æƒ³è®©ä»€ä¹ˆæ ‡ç‚¹ç›´æ¥ä¸Šå±ï¼Œå¯ä»¥åŠ åœ¨ alphabetï¼Œæˆ–è€…ç¼–è¾‘æ ‡ç‚¹ç¬¦å·ä¸ºä¸¤ä¸ªåŠä»¥ä¸Šçš„æ˜ å°„
  alphabet: "zyxwvutsrqponmlkjihgfedcbaZYXWVUTSRQPONMLKJIHGFEDCBA`;/" 
  # initials å®šä¹‰ä»…ä½œä¸ºå§‹ç çš„æŒ‰é”®ï¼Œæ’é™¤ ` è®©å•ä¸ªçš„ ` å¯ä»¥ç›´æ¥ä¸Šå±
#  initials: zyxwvutsrqponmlkjihgfedcbaZYXWVUTSRQPONMLKJIHGFEDCBA
  delimiter: " '"  # ç¬¬ä¸€ä½<ç©ºæ ¼>
# table_translatorç¿»è¯‘å™¨ï¼Œæ”¯æŒè‡ªåŠ¨ä¸Šå±ã€‚ä¾‹å¦‚ â€œzmhuâ€å¯ä»¥è‡ªåŠ¨ä¸Šå±â€œæ€ä¹ˆå›äº‹â€
  auto_select: true
  auto_select_pattern: ^;\w+|^o\w{3}$
  algebra: 
    __patch:
      - config_pinyin:/å…¨æ‹¼     #æ‹¼éŸ³è½¬ç 
#      - config_pinyin:/abbreviation         #ç®€æ‹¼
      - config_pinyin:/spelling_correction # å®¹é”™æ‹¼å†™
      - config_pinyin:/key_correction # è‡ªåŠ¨çº æ­£ä¸€äº›å¸¸è§çš„æŒ‰é”®é”™è¯¯
      - config_pinyin:/fuzhu_kong             # å¯é€‰è¾…åŠ©ç æœ‰ï¼šfuzhu_kong(ç©º æ— è¾…åŠ©ç )ï¼Œfuzhu_001
#      - config_pinyin:/ç›´æ¥è¾…åŠ©

# ä¸»ç¿»è¯‘å™¨ï¼Œæ‹¼éŸ³
translator:
  dictionary: pinyin               # æŒ‚è½½è¯åº“ å¼•å…¥å¢è¡¥è‡ªå®šè¯å…¸
  prism: pinyin_full   # å¤šæ–¹æ¡ˆå…±ç”¨ä¸€ä¸ªè¯åº“æ—¶ï¼Œä¸ºé¿å…å†²çªï¼Œéœ€è¦ç”¨ prism æŒ‡å®šä¸€ä¸ªåå­—ã€‚
  enable_word_completion: true  # å¤§äº 4 éŸ³èŠ‚çš„è¯æ¡è‡ªåŠ¨è¡¥å…¨ï¼Œlibrime > 1.11.2
  enable_completion: true  # å¯ç”¨å€™é€‰è¯è¡¥å…¨
  initial_quality: 1.2          # æ‹¼éŸ³çš„æƒé‡åº”è¯¥æ¯”è‹±æ–‡å¤§  
  core_word_length: 4
  max_word_length: 10
  preedit_format:
    - xform/([nl])v/$1Ã¼/
    - xform/([nl])ue/$1Ã¼e/
    - xform/([jqxy])v/$1u/
    - xform/(?<=[A-Z])\s(?=[A-Z])//  # æ¶ˆé™¤å¤§å†™å­—æ¯ä¹‹é—´çš„ç©ºæ ¼


# æ ‡ç‚¹ç¬¦å·
punctuator:
  import_preset: symbols  # ä» symbols.yaml ç»§æ‰¿é€šç”¨çš„ 

# å¿«æ·é”®è®¾ç½®
key_binder:
#  import_preset: default  # ä» default.yaml ç»§æ‰¿é€šç”¨çš„ 
# Lua é…ç½®: ä»¥è¯å®šå­—
  select_first_character: "Shift+exclam"  # ä»¥è¯å®šå­— shift+1 [(ç¬¬ä¸€ä¸ªå­—)
  select_last_character:  "Shift+at"  # ä»¥è¯å®šå­—å¥å· shift+2 (æœ€åä¸€ä¸ªå­—) 
  custom_bindings:
    __append: 
      # åœ¨é€™è£æ·»åŠ åªåœ¨æœ¬æ–¹æ¡ˆä¸­ç”Ÿæ•ˆçš„æŒ‰éµç¶å®š    
  bindings:
    __patch: 
      - :/key_binder/custom_bindings?
      - config_base:/key_config/options_toggle
      - config_base:/key_config/tab_Page
      - config_base:/key_config/keys

__patch:
  # å¢åŠ ä¸€ä¸ªè¾…åŠ©è¯†åˆ«å™¨
  - 'engine/segmentors/@after 01': matcher@recognizer_secondary
##################################################
  # è‡ªå®šä¹‰çŸ­è¯­
  - 'engine/translators/@after 02': table_translator@custom_phrase 
  # è‹±æ–‡è¾“å…¥
  - 'engine/translators/@after 03': table_translator@melt_eng 
  # ä¸­è‹±æ··åˆè¯æ±‡
  - 'engine/translators/@after 04': table_translator@cn_en
  # é•¿è¯ä¼˜å…ˆï¼ˆé¡ºåºè¦æ±‚ï¼šé•¿è¯ä¼˜å…ˆ > Emojiï¼‰
  #ï¼ˆæå‡ã€Œè¥¿å®‰ã€ã€Œææ¡ˆã€ã€Œå›¾æ¡ˆã€ã€Œé¥¥é¥¿ã€ç­‰è¯æ±‡çš„ä¼˜å…ˆçº§ï¼‰
  - 'engine/filters/@after 00': lua_filter@*long_word_filter
  # è¾…åŠ©ç  ï¼ˆbefore last åœ¨åˆ—è¡¨æœ€åä¸€ä¸ªä¹‹å‰åŠ ä¸Šï¼‰
#  - 'engine/filters/@before last': lua_filter@*auxCode_filter@zrm_aux_code

##################################################
  # Lua é…ç½®ï¼šEmoji é™é¢‘åˆ°ç¬¬ idx ä¸ªä½ç½®
  - emoji_reduce/idx: 3

  # ç®€ç¹åˆ‡æ¢  
  - simplification/tips: none   #ç®€ç¹å¯¹ç…§   è½¬æ¢æç¤º: all éƒ½æ˜¾ç¤º | char ä»…å•å­—æ˜¾ç¤º | none ä¸æ˜¾ç¤ºã€‚

  # å“åº”æ—¶é—´æ—¥æœŸlua  
  - recognizer/patterns/week: "^(/wk|xq)$"
  - recognizer/patterns/time: "^(/wt|sj)$"
  - recognizer/patterns/date: "^(/wd|rq)$" 

##################################################
  # ã€é‡è¦ã€‘è¯»å–ç”¨æˆ·è‡ªå®šä¹‰è¡¥ä¸æ–‡ä»¶
  - pinyin.custom:/patch?
##################################################


# è‡ªå®šä¹‰çŸ­è¯­
custom_phrase:
  dictionary: ""
  user_dict: custom_phrase/custom_phrase_full   # éœ€è¦æ‰‹åŠ¨åˆ›å»º custom_phrase_xxx.txt æ–‡ä»¶
  db_class: stabledb
  enable_completion: false # è¡¥å…¨æç¤º
  enable_sentence: false   # ç¦æ­¢é€ å¥
  initial_quality: 99      # custom_phrase çš„æƒé‡åº”è¯¥æ¯” pinyin å’Œ melt_eng å¤§

# æ¬¡ç¿»è¯‘å™¨ï¼Œè‹±æ–‡
melt_eng:
  dictionary: melt_eng     # æŒ‚è½½è¯åº“ melt_eng.dict.yaml
  tag: english  # librime<=1.11 è«‹åœ¨ custom ä¸­ç½®ç©º
  enable_sentence: false   # ç¦æ­¢é€ å¥
  enable_user_dict: false  # ç¦ç”¨ç”¨æˆ·è¯å…¸
  initial_quality: 1.1     # åˆå§‹æƒé‡
  comment_format:          # è‡ªå®šä¹‰æç¤ºç 
    - xform/.*//           # æ¸…ç©ºæç¤ºç 

recognizer_secondary:
  patterns:
    # 1. è¼¸å…¥é•·åº¦é”åˆ° 4 å¾Œé–‹å§‹è¼¸å‡ºè‹±èª *æˆ–* å‰ 4 å­—æ¯ä¸­æœ‰å¤§å¯«å­—æ¯
    english: '(^[A-Za-z]{4}[A-Za-z]*)|(^[A-Z][A-Za-z]*)|(^[a-z][A-Z][a-zA-Z]*)|(^[a-z][a-z][A-Z][a-zA-Z]*)'
    # 2. å°ä»»ä½•è¼¸å…¥éƒ½è¼¸å‡ºè‹±èª
    # english: '.*'
    # 3. è¼¸å…¥é•·åº¦é”åˆ° 4 å¾Œé–‹å§‹è¼¸å‡ºè‹±èª
    # english: '^[A-Za-z]{4}[A-Za-z]*'

# ä¸­è‹±æ··åˆè¯æ±‡
cn_en:
  dictionary: ""
  user_dict: en_dicts/cn_en
  db_class: stabledb
  enable_completion: true
  enable_sentence: false
  initial_quality: 0.5
  comment_format:
    - xform/^.+$//


##################################################

# Lua é…ç½®ï¼šé•¿è¯ä¼˜å…ˆ
# æå‡ count ä¸ªè¯è¯­ï¼Œæ’å…¥åˆ°ç¬¬ idx ä¸ªä½ç½®ã€‚
# ç¤ºä¾‹ï¼šå°† 2 ä¸ªè¯æ’å…¥åˆ°ç¬¬ 4ã€5 ä¸ªå€™é€‰é¡¹ï¼Œè¾“å…¥ jie å¾—åˆ°ã€Œ1æ¥ 2è§£ 3å§ 4é¥¥é¥¿ 5ææ¶ã€
long_word_filter:
  count: 2
  idx: 4

# Lua é…ç½®:  è¾…åŠ©ç 
axu_code:
  # æ¿€æ´»ç 
  trigger_word: "`"
  # å±•ç¤ºè¾…ç çš„æ¨¡å¼
  # always:   æ€»æ˜¯å±•ç¤º(é»˜è®¤)
  # trigger:  è¾“å…¥æ¿€æ´»ç åæ¿€æ´»è¾…ç 
  # none:     å§‹ç»ˆä¸å±•ç¤ºè¾…ç 
  show_aux_notice: "trigger"

  # Lua é…ç½®: ç½®é¡¶å€™é€‰é¡¹
# æ³¨é‡Šå¤ªé•¿äº†ï¼Œè¯·å‚è€ƒ pin_cand_filter.lua å¼€å¤´çš„è¯´æ˜ä¹¦ã€‚
pin_cand_filter:
  # æ ¼å¼ï¼šç¼–ç <Tab>å­—è¯1<Space>å­—è¯2â€¦â€¦
  # å•ç¼–ç 
  - q	å» åƒ
  - w	æˆ‘ ä¸‡ å¾€
  - e	å‘ƒ
  - r	è®© äºº
  - t	ä»– å¥¹ å®ƒ ç¥‚
  - y	ä¸ äº
  # - u åœ¨ custom_phrase ç½®é¡¶äº† æœ‰ ğŸˆ¶ åˆ ç”±
  # - i åœ¨ custom_phrase ç½®é¡¶äº† ä¸€ ä»¥ å·² äº¦
  - o	å“¦
  - p	ç‰‡ ç¯‡
  - a	å•Š
  - s	æ˜¯ æ—¶ ä½¿ å¼
  - d	çš„ åœ° å¾—
  - f	å‘ æ”¾ åˆ†
  - g	ä¸ª å„
  - h	å’Œ æˆ–
  - j	åŠ å°† å³ æ—¢ ç»§
  - k	å¯
  - l	äº† å•¦ å–½ å˜
  - z	åœ¨ å† è‡ª
  - x	æƒ³ åƒ å‘
  - c	æ‰ ä»
  # - v
  - b	å§ æŠŠ å‘— ç™¾
  - n	é‚£ å“ª æ‹¿ å‘
  - m	å— å˜› å‘£ å‘’
  # å¸¸ç”¨å•å­—
  - qing	è¯·
  - qu	å»
  - wo	æˆ‘
  - wei	ä¸º
  - er	è€Œ å„¿ äºŒ
  - en	å—¯
  - rang	è®©
  - ta	ä»– å¥¹ å®ƒ ç¥‚
  - tai	å¤ª
  - tong	åŒ
  - yu	ä¸ äº
  - you	æœ‰ åˆ ç”±
  - yao	è¦
  - ye	ä¹Ÿ
  - shi	æ˜¯ æ—¶ ä½¿ å¼
  - suo	æ‰€
  - shang	ä¸Š
  - shuo	è¯´
  - de	çš„ åœ° å¾—
  - dan	ä½†
  - dou	éƒ½
  - dao	åˆ° å€’
  - dian	ç‚¹
  - dang	å½“
  - dui	å¯¹
  - fa	å‘
  - ge	ä¸ª å„
  - gang	åˆš
  - he	å’Œ
  - huo	æˆ–
  - hui	ä¼š
  - hai	è¿˜
  - hao	å¥½
  - ji	åŠ å³ æ—¢
  - jiu	å°±
  - jiang	å°†
  - ke	å¯
  - kan	çœ‹
  - kai	å¼€
  - le	äº†
  - la	å•¦ æ‹‰
  - lai	æ¥
  - li	é‡Œ
  - zai	åœ¨ å†
  - zhi	åª
  - zhe	è¿™ ç€
  - zhen	çœŸ
  - zui	æœ€
  - zheng	æ­£
  - zuo	åš å å·¦
  - ze	åˆ™
  - xiang	æƒ³ åƒ å‘
  - xian	å…ˆ
  - xia	ä¸‹
  - xing	è¡Œ
  - cai	æ‰
  - cong	ä»
  - chu	å‡º
  - ba	æŠŠ å§
  - bu	ä¸
  - bing	å¹¶
  - bei	è¢«
  - bie	åˆ«
  - bi	æ¯”
  - bing	å¹¶
  - na	é‚£ å“ª æ‹¿ å‘
  - ni	ä½ 
  - ma	å— å˜› å¦ˆ
  - mei	æ²¡
  - mai	ä¹° å–
  - reng	ä» æ‰”
  # taã€na
  - ta men	ä»–ä»¬ å¥¹ä»¬ å®ƒä»¬
  - tm	ä»–ä»¬ å¥¹ä»¬ å®ƒä»¬
  - ta de	ä»–çš„ å¥¹çš„ å®ƒçš„
  - td	ä»–çš„ å¥¹çš„ å®ƒçš„
  - ta men de	ä»–ä»¬çš„ å¥¹ä»¬çš„ å®ƒä»¬çš„
  - na er	é‚£å„¿ å“ªå„¿
  - na ge	é‚£ä¸ª å“ªä¸ª
  - ng	é‚£ä¸ª å“ªä¸ª æ‹¿ä¸ª
  - na xie	é‚£äº› å“ªäº›
  - na li	é‚£é‡Œ å“ªé‡Œ
  - na bian	é‚£è¾¹ å“ªè¾¹
  - na bian er	é‚£è¾¹å„¿ å“ªè¾¹å„¿
  - na wei	é‚£ä½ å“ªä½
  # ç®€ç 
  - zh	è¿™
  - dd	ç­‰ç­‰
  - dddd	ç­‰ç­‰ç­‰ç­‰
  - gg	åˆšåˆš
  - cgg	æ‰åˆšåˆš
  - zd	çŸ¥é“
  - bzd	ä¸çŸ¥é“
  - ww	å¾€å¾€
  - hh	å“ˆå“ˆ
  - kk	çœ‹çœ‹
  - cc	å¸¸å¸¸
  - xx	æƒ³æƒ³ æƒ³è±¡
  - yw	å› ä¸º
  - sm	ä»€ä¹ˆ
  - wsm	ä¸ºä»€ä¹ˆ
  - sbs	æ˜¯ä¸æ˜¯
  - msm	æ²¡ä»€ä¹ˆ
  - smd	ä»€ä¹ˆçš„
  - sms	ä»€ä¹ˆæ˜¯
  - sma	ä»€ä¹ˆå•Š

